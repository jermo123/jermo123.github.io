// Gallery Data
const galleryData = {
    standard: [
        {
            id: 1,
            title: "A036A",
            description: "Simple red white and blue theme good for American themes ",
            img: "images/standard/a036a-red-white-blue-rosette-icing-border-trim-200x200.png"
        },

        {
            id: 2,
            title: "AO5A Lots O' Dots",
            description: "Blue orange yellow green dots",
            img: "images/standard/ao5a-dots-blue-orange-yellow-green-icing_200x200.jpg"
        },

        {
            id: 3,
            title: "AO11 Mini dots",
            description: "Classy mini dots design with ample space for writing",
            img: "images/standard/ao11-mini-dots-icing-edited_200x200.jpg"
        },

        {
            id: 4,
            title: "AO12 Mini dots",
            description: "  ",
            img: "images/standard/ao12-bright-gel-streamers-with-bright-quins_200x200.jpg"
        },

        {
            id: 5,
            title: "AO14 Icing Swirls",
            description: "  ",
            img: "images/standard/ao14-icing-swirls_200x200.jpg"
        },

        {
            id: 6,
            title: "AO8 Circle of Rosebuds",
            description: "  ",
            img: "images/standard/ao18-circle-of-rosebuds-icing_200x200.jpg"
        },

        {
            id: 7,
            title: "AO19 Roses with Bud Border",
            description: "  ",
            img: "images/standard/ao19-roses-with-bud-border-icing_200x200.jpg"
        },

        {
            id: 8,
            title: "AO23 Multi-color icing quins and streamers sheet",
            description: "  ",
            img: "images/standard/ao23-multi-color-icing-quins-and-streamers-sheet_200x200.jpg"
        },

        {
            id: 9,
            title: "AO24 Blue Green icing with jumbo and bright quins",
            description: "  ",
            img: "images/standard/ao24-blue-green-icing-with-jumbo-and-bright-quins_200x200.jpg"
        },

        {
            id: 10,
            title: "AO27 Unicorn Sweet Shapes",
            description: "  ",
            img: "images/standard/ao27-unicorn-sweet-shapes-v2_200x200.jpg"
        },

        {
            id: 11,
            title: "AO29 Yay! Edible Image Assortment Icing",
            description: "  ",
            img: "images/standard/ao29-yay!-edible-image-assortment---icing-quins_200x200.jpg"
        },

        {
            id: 12,
            title: "AO31",
            description: "  ",
            img: "images/standard/ao31_200x200.jpg"
        },

        {
            id: 13,
            title: "AO32",
            description: "  ",
            img: "images/standard/ao32_200x200.jpg"
        },


        {
            id: 15,
            title: "AO34",
            description: "  ",
            img: "images/standard/ao34_200x200.jpg"
        },

        {
            id: 16,
            title: "AUT18 Jack O Lantern Sweet Shapes Design",
            description: "  ",
            img: "images/standard/aut18-jack-o-lantern-sweet-shapes-design_200x200.jpg"
        },

        {
            id: 17,
            title: "AUT19 Pumpkin Icing",
            description: "  ",
            img: "images/standard/aut-19-pumpkin-icing-200603c913edd49660ca4bdff000099acea.jpg"
        },

        {
            id: 18,
            title: "B8A Green Orange Red Icing with Autumn Quins",
            description: "  ",
            img: "images/standard/b8a-green-orange-red-icing-with-autumn-quins_200x200.jpg"
        },

        {
            id: 19,
            title: "B18 Celebration Icing",
            description: "  ",
            img: "images/standard/b18-celebration-icing_200x200.jpg"
        },

        {
            id: 20,
            title: "B19 Gel dot rainbow border",
            description: "  ",
            img: "images/standard/b19-gel-dot-rainbow-border-200-x-200.jpg"
        },

        {
            id: 21,
            title: "BDAY-3A Side Candles",
            description: "  ",
            img: "images/standard/bday-3a-side-candles-bold-icing_200x200.jpg"
        },

        {
            id: 99,
            title: "BDAY-4A Happy Birthday Candles w Quins",
            description: "  ",
            img: "images/standard/bday-4a-happy-birthday-candles-gel-with-bright-quins_200x200.jpg"
        },


        {
            id: 98,
            title: "BDAY-8A Happy Birthday Gel",
            description: "  ",
            img: "images/standard/bday-8a-happy-birthday-candles-gel-with-bright-quins_200x200.jpg"
        },

        {
            id: 97,
            title: "BDAY-39A Oh Happpy Day Airbrush",
            description: "  ",
            img: "images/standard/bday-39a-oh-happy-day-airbrush_200x200.jpg"
        },

        {
            id: 23,
            title: "BDAY-42 Bonne Fete",
            description: "  ",
            img: "images/standard/bday-42-bonne-fete-avec-bright-quins-airbrush_200x200.jpg"
        },

        {
            id: 24,
            title: "BDAY - Simple",
            description: "  ",
            img: "images/standard/border-dqcake_b-dayballoons_wh.jpg"
        },

        {
            id: 25,
            title: "Let it snow Penguins",
            description: "  ",
            img: "images/standard/christmas-3.jpg"
        },

        {
            id: 26,
            title: "Birthday Balloons",
            description: "  ",
            img: "images/standard/dqcake_b-dayballoons_whole_q320_ato4_fpo-200.png"
        },


        {
            id: 27,
            title: "Happy Easter",
            description: "  ",
            img: "images/standard/easterdqcake_ol_q222_ato4_fpo.jpg"
        },
        {
            id: 28,	
            title: "Llama",
            description: "  ",
            img: "images/standard/lama-200-x-200.jpg"
        },

        {
            id: 29,
            title: "Mother's Day",
            description: "  ",
            img: "images/standard/mothersdaycake_oh_q223_ato4_fpo-200x200.jpg"
        },

        {
            id: 30,
            title: "Mother's Day (no writing)",
            description: "  ",
            img: "images/standard/mothersdaydqcake_no-writing-200x200.jpg"
        },

        {
            id: 31,
            title: "Canada Day",
            description: "  ",
            img: "images/standard/o20-canada-day-icing_200x200.jpg"
        },
        {
            id: 32,
            title: "Snowman Face",
            description: "  ",
            img: "images/standard/snowmanfacedqcake_oh_q421_ato4_fpo-(002)-200x200.jpg"
        },
        {
            id: 33,
            title: "SPR18 Love You Mom",
            description: "  ",
            img: "images/standard/spr18-love-you-mom-gel_200x200.jpg"
        },

        {
            id: 34,
            title: "SPR20 Happy Easter Carrots",
            description: "  ",
            img: "images/standard/spr20-carrots-on-top-icing.jpg"
        },
        {
            id: 35,
            title: "SPR21 Fun Flowers",
            description: "  ",
            img: "images/standard/spr21-fun-flowers-yellow-pink-and-blue-icing_200x200.jpg"
        },

        {
            id: 36,
            title: "SPR23 Pink Yellow Rose with Zig Zag Icing",
            description: "  ",
            img: "images/standard/spr23-pink-yellow-rose-cake-with-zig-zag-icing_200x200.jpg"
        },

        {
            id: 37,
            title: "Stars and Sea Horses",
            description: "  ",
            img: "images/standard/stars-and-sea-horses-200-x-200.jpg"
        },

        {
            id: 38,
            title: "SUM14 Draft Beer Mug",
            description: "  ",
            img: "images/standard/sum14-draft-beer-mug_200x200.jpg"
        },

        {
            id: 39,
            title: "WIN5B Snowman Face",
            description: "  ",
            img: "images/standard/win5b-snowman-face-red-icing-gel-(custom).jpg"
        },

        {
            id: 40,
            title: "WIN26 Penguin Happy Holidays",
            description: "  ",
            img: "images/standard/win26-penguin-happy-holidays-(custom).jpg"
        },


        {
            id: 41,
            title: "WIN27 Holiday Gift",
            description: "  ",
            img: "images/standard/win27-holiday-gift-(custom).jpg"
        },


        {
            id: 42,
            title: "WIN29 Love Icing Gel",
            description: "  ",
            img: "images/standard/win29-love-icing-gel_200x200.jpg"
        },








    ],
    custom: [
        {
            id: 101,
            title: "Dairy Queen Logo",
            description: "Custom cake featuring the iconic Dairy Queen logo.",
            img: "images/custom/custom1.jpg"
        },
        {
            id: 102,
            title: "Seasonal Special",
            description: "Festive design perfect for holiday celebrations.",
            img: "images/custom/custom2.jpg"
        },
        // Add more custom designs as needed
    ]
};

// Current Category
let currentCategory = 'standard';
let showingFavorites = false;

// DOM Elements
const standardBtn = document.getElementById('standardBtn');
const customBtn = document.getElementById('customBtn');
const favoritesBtn = document.getElementById('favoritesBtn');
const gallery = document.getElementById('gallery');
const searchBar = document.getElementById('searchBar');

// Function to Load Gallery
function loadGallery(category, searchTerm = "") {
    gallery.innerHTML = ''; // Clear existing items
    let items = [];

    if (showingFavorites) {
        const favorites = getFavorites();
        items = getAllItems().filter(item => favorites.includes(item.id));
    } else {
        items = galleryData[category].filter(item => 
            item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
            item.description.toLowerCase().includes(searchTerm.toLowerCase())
        );
    }

    items.forEach(item => {
        // Create gallery item div
        const galleryItem = document.createElement('div');
        galleryItem.classList.add('gallery-item');

        // Create anchor for Lightbox
        const link = document.createElement('a');
        link.href = item.img;
        link.setAttribute('data-lightbox', 'gallery');
        link.setAttribute('data-title', `<h2>${item.title}</h2><p>${item.description}</p>`);

        // Create image element
        const img = document.createElement('img');
        img.src = item.img;
        img.alt = item.title;
        img.loading = "lazy"; // For performance

        // Create title overlay
        const title = document.createElement('div');
        title.classList.add('title');
        title.textContent = item.title;

        // Create favorite icon
        const favoriteIcon = document.createElement('span');
        favoriteIcon.classList.add('favorite-icon');
        favoriteIcon.innerHTML = '&#9734;'; // Star outline

        // Check if item is in favorites
        if (isFavorite(item.id)) {
            favoriteIcon.classList.add('favorited');
            favoriteIcon.innerHTML = '&#9733;'; // Filled star
        }

        // Event Listener for Favorite Icon
        favoriteIcon.addEventListener('click', (e) => {
            e.preventDefault();
            toggleFavorite(item.id);
            if (isFavorite(item.id)) {
                favoriteIcon.classList.add('favorited');
                favoriteIcon.innerHTML = '&#9733;';
            } else {
                favoriteIcon.classList.remove('favorited');
                favoriteIcon.innerHTML = '&#9734;';
            }
            if (showingFavorites) {
                loadGallery(currentCategory, searchBar.value);
            }
        });

        // Assemble the gallery item
        link.appendChild(img);
        galleryItem.appendChild(link);
        galleryItem.appendChild(title);
        galleryItem.appendChild(favoriteIcon);
        gallery.appendChild(galleryItem);
    });

    // If no items found
    if (items.length === 0) {
        gallery.innerHTML = '<p class="no-results">No designs match your search.</p>';
    }
}

// Helper Functions for Favorites
function getFavorites() {
    return JSON.parse(localStorage.getItem('favorites')) || [];
}

function isFavorite(id) {
    const favorites = getFavorites();
    return favorites.includes(id);
}

function toggleFavorite(id) {
    let favorites = getFavorites();
    if (favorites.includes(id)) {
        favorites = favorites.filter(favId => favId !== id);
    } else {
        favorites.push(id);
    }
    localStorage.setItem('favorites', JSON.stringify(favorites));
}

function getAllItems() {
    return [...galleryData.standard, ...galleryData.custom];
}

// Event Listeners for Category Buttons
standardBtn.addEventListener('click', () => {
    if (currentCategory !== 'standard' || showingFavorites) {
        currentCategory = 'standard';
        showingFavorites = false;
        standardBtn.classList.add('active');
        customBtn.classList.remove('active');
        favoritesBtn.classList.remove('active');
        searchBar.value = ''; // Clear search
        loadGallery(currentCategory);
    }
});

customBtn.addEventListener('click', () => {
    if (currentCategory !== 'custom' || showingFavorites) {
        currentCategory = 'custom';
        showingFavorites = false;
        customBtn.classList.add('active');
        standardBtn.classList.remove('active');
        favoritesBtn.classList.remove('active');
        searchBar.value = ''; // Clear search
        loadGallery(currentCategory);
    }
});

favoritesBtn.addEventListener('click', () => {
    if (!showingFavorites) {
        showingFavorites = true;
        favoritesBtn.classList.add('active');
        standardBtn.classList.remove('active');
        customBtn.classList.remove('active');
        searchBar.value = ''; // Clear search
        loadGallery(currentCategory);
    }
});

// Event Listener for Search Bar
searchBar.addEventListener('input', (e) => {
    const searchTerm = e.target.value;
    loadGallery(currentCategory, searchTerm);
});

// Initial Gallery Load
document.addEventListener('DOMContentLoaded', () => {
    loadGallery(currentCategory);
});
